SET SQL_SAFE_UPDATES = 0;
Commit;

-- to insert from all listed NSE Stocks (Only EQ & BE Serise)
-- https://www.nseindia.com/content/equities/EQUITY_L.csv [security infor page: https://www.nseindia.com/corporates/content/securities_info.htm ]
-- Format excel to change date format as YYYY-MM-DD
-- drop table temp_nse_all;
create table temp_nse_all (
  symbol varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  name varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  series varchar(4) COLLATE utf8_unicode_ci DEFAULT NULL,
  listing_date date DEFAULT NULL,
  paidup_value int(2) DEFAULT NULL,
  market_lot int(4) DEFAULT NULL,
  isin_code varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  face_value int(2) DEFAULT NULL,
  PRIMARY KEY (isin_code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Temp Table for NSE ALL';

select count(1) from temp_nse_all; -- 1599
select * from temp_nse_all a order by listing_date desc;

-- To insert from All BSE Listed Stocks
-- https://www.bseindia.com/corporates/List_Scrips.aspx?expandable=1 [Segment = Equity]
-- order data by series then filter out Status in [Suspended, Delisted, N] and Excluded Groups [Z, ZP] also exclude where industry is null
-- drop table temp_bse_all;
create table temp_bse_all (
  scriptcode int(8) DEFAULT NULL,
  securityid  varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  name varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  status varchar(10) COLLATE utf8_unicode_ci DEFAULT NULL,
  groupcode varchar(2) COLLATE utf8_unicode_ci DEFAULT NULL,
  face_value decimal(6,2) DEFAULT 0,
  isin_code varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  industry varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  instrument varchar(20) DEFAULT 'Equity',
  PRIMARY KEY (isin_code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Temp Table for BSE ALL';

select count(1) from temp_bse_all; -- 3954

SELECT * from temp_nse_all a, temp_bse_all b where a.isin_no = b.isin_no; -- 1559 [40 stocks listed on NSE but not BSE]
select * from temp_nse_all a where a.isin_no not in
(SELECT a.isin_no from temp_nse_all a, temp_bse_all b where a.isin_no = b.isin_no) order by a.isin_no;

select * from temp_bse_all a where a.isin_no not in
(SELECT a.isin_no from temp_nse_all a, temp_bse_all b where a.isin_no = b.isin_no and industry <> 'XX') order by a.isin_no; -- 2395 stocks listed on BSE but on NSE

-- create table stock_universe_backup as select * from stock_universe;
-- truncate table stock_universe
-- first insert all NSE Stocks
INSERT INTO stock_universe (ticker, ticker1, ticker2, ticker3, ticker4, ticker5, nse_code, bse_code, isin_code, short_name, name, bse_industry, subindustryid, is_sensex, is_nifty50, is_niftyjr, is_bse100, is_nse100, is_bse200, is_nse200, is_bse500, is_nse500, marketcap, marketcap_rank, pe_ttm, ticker_old, listing_date)
select symbol, '', '', '', '', '', symbol, '', isin_code, name, name, '', '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '0', '0', '', listing_date from temp_nse_all b;

-- then insert all remaining stocks from BSE (excluding added issin already inserted)
INSERT INTO stock_universe (ticker, ticker1, ticker2, ticker3, ticker4, ticker5, nse_code, bse_code, isin_code, short_name, name, bse_industry, subindustryid, is_sensex, is_nifty50, is_niftyjr, is_bse100, is_nse100, is_bse200, is_nse200, is_bse500, is_nse500, marketcap, marketcap_rank, pe_ttm, ticker_old, listing_date)
select scriptcode, '', '', '', '', '', '', scriptcode, isin_code, name, name, industry, '0', '0', '0', '0', '0', '1', '0', '0', '0', '0', '0', '0', '0', '', '1900-01-01' from temp_bse_all b
where b.isin_code not in (select isin_code from temp_nse_all);

update stock_universe a, temp_bse_all b set bse_code = scriptcode, bse_industry = industry  where a.isin_code = b.isin_code;

SET SQL_SAFE_UPDATES = 0;
Commit;

select * from stock_universe a WHERE is_nse500 = 1 or is_bse500 = 1;
select * from stock_universe a WHERE a.name like '%SUN%';
-- Reset all flags
update stock_universe a set a.is_sensex = 0, a.is_nifty50 = 0, a.is_niftyjr = 0, a.is_bse100 = 0, a.is_nse100 = 0, a.is_bse200 = 0, a.is_nse200 = 0, a.is_bse500 = 0, a.is_nse500 = 0;

-- update NIFTY 50
update stock_universe a set a.is_nifty50 = 0;
update stock_universe a set a.is_nifty50 = 1 where ticker in
-- ('ADANIPORTS','ASIANPAINT','AXISBANK','BAJAJ-AUTO','BAJFINANCE','BAJAJFINSV','BPCL','BHARTIARTL','INFRATEL','CIPLA','COALINDIA','DRREDDY','EICHERMOT','GAIL','GRASIM','HCLTECH','HDFCBANK','HEROMOTOCO','HINDALCO','HINDPETRO','HINDUNILVR','HDFC','ITC','ICICIBANK','IBULHSGFIN','IOC','INDUSINDBK','INFY','JSWSTEEL','KOTAKBANK','LT','M&M','MARUTI','NTPC','ONGC','POWERGRID','RELIANCE','SBIN','SUNPHARMA','TCS','TATAMOTORS','TATASTEEL','TECHM','TITAN','UPL','ULTRACEMCO','VEDL','WIPRO','YESBANK','ZEEL');
-- (2019-01-08 no change)
-- ('ADANIPORTS','ASIANPAINT','AXISBANK','BAJAJ-AUTO','BAJFINANCE','BAJAJFINSV','BPCL','BHARTIARTL','INFRATEL','CIPLA','COALINDIA','DRREDDY','EICHERMOT','GAIL','GRASIM','HCLTECH','HDFCBANK','HEROMOTOCO','HINDALCO','HINDPETRO','HINDUNILVR','HDFC','ITC','ICICIBANK','IBULHSGFIN','IOC','INDUSINDBK','INFY','JSWSTEEL','KOTAKBANK','LT','M&M','MARUTI','NTPC','ONGC','POWERGRID','RELIANCE','SBIN','SUNPHARMA','TCS','TATAMOTORS','TATASTEEL','TECHM','TITAN','UPL','ULTRACEMCO','VEDL','WIPRO','YESBANK','ZEEL');
-- (2019-04-28 In: Britania Out: )
   ('ADANIPORTS','ASIANPAINT','AXISBANK','BAJAJ-AUTO','BAJFINANCE','BAJAJFINSV','BPCL','BHARTIARTL','INFRATEL','BRITANNIA','CIPLA','COALINDIA','DRREDDY','EICHERMOT','GAIL','GRASIM','HCLTECH','HDFCBANK','HEROMOTOCO','HINDALCO','HINDUNILVR','HDFC','ICICIBANK','ITC','IBULHSGFIN','IOC','INDUSINDBK','INFY','JSWSTEEL','KOTAKBANK','LT','M&M','MARUTI','NTPC','ONGC','POWERGRID','RELIANCE','SBIN','SUNPHARMA','TCS','TATAMOTORS','TATASTEEL','TECHM','TITAN','UPL','ULTRACEMCO','VEDL','WIPRO','YESBANK','ZEEL');

-- update NIFTYJr
update stock_universe a set a.is_niftyjr = 0;
update stock_universe a set a.is_niftyjr = 1 where ticker in
-- ('ABB','ACC','ABCAPITAL','AMBUJACEM','ASHOKLEY','AUROPHARMA','DMART','BANDHANBNK','BANKBARODA','BEL','BHEL','BIOCON','BOSCHLTD','BRITANNIA','CADILAHC','COLPAL','CONCOR','DLF','DABUR','GICRE','GODREJCP','HDFCLIFE','HAVELLS','HINDZINC','ICICIGI','ICICIPRULI','INDIGO','L&TFH','LICHSGFIN','LUPIN','MRF','MARICO','MOTHERSUMI','NHPC','NMDC','OIL','OFSS','PETRONET','PIDILITIND','PEL','PGHH','SBILIFE','SHREECEM','SRTRANSFIN','SIEMENS','SAIL','SUNTV','NIACL','MCDOWELL-N','IDEA');
-- (2019-01-08 no change)
-- ('ABB','ACC','ABCAPITAL','AMBUJACEM','ASHOKLEY','AUROPHARMA','DMART','BANDHANBNK','BANKBARODA','BEL','BHEL','BIOCON','BOSCHLTD','BRITANNIA','CADILAHC','COLPAL','CONCOR','DLF','DABUR','GICRE','GODREJCP','HDFCLIFE','HAVELLS','HINDZINC','ICICIGI','ICICIPRULI','INDIGO','L&TFH','LICHSGFIN','LUPIN','MRF','MARICO','MOTHERSUMI','NHPC','NMDC','OIL','OFSS','PETRONET','PIDILITIND','PEL','PGHH','SBILIFE','SHREECEM','SRTRANSFIN','SIEMENS','SAIL','SUNTV','NIACL','MCDOWELL-N','IDEA');
-- (2019-04-28 change: )
   ('ABB','ACC','AMBUJACEM','ASHOKLEY','AUROPHARMA','DMART','BAJAJHLDNG','BANDHANBNK','BANKBARODA','BHEL','BIOCON','BOSCHLTD','CADILAHC','COLPAL','CONCOR','DLF','DABUR','DIVISLAB','GICRE','GODREJCP','HDFCAMC','HDFCLIFE','HAVELLS','HINDPETRO','HINDZINC','ICICIGI','ICICIPRULI','INDIGO','L&TFH','LUPIN','MRF','MARICO','MOTHERSUMI','NHPC','NMDC','OFSS','PAGEIND','PETRONET','PIDILITIND','PEL','PGHH','SBILIFE','SHREECEM','SRTRANSFIN','SIEMENS','SAIL','NIACL','UBL','MCDOWELL-N','IDEA');

-- update NSE 100
update stock_universe a set a.is_nse100 = 0;
update stock_universe a set a.is_nse100 = 1 where ticker in
-- ('ABB','ACC','ADANIPORTS','ABCAPITAL','AMBUJACEM','ASHOKLEY','ASIANPAINT','AUROPHARMA','DMART','AXISBANK','BAJAJ-AUTO','BAJFINANCE','BAJAJFINSV','BANDHANBNK','BANKBARODA','BEL','BHEL','BPCL','BHARTIARTL','INFRATEL','BIOCON','BOSCHLTD','BRITANNIA','CADILAHC','CIPLA','COALINDIA','COLPAL','CONCOR','DLF','DABUR','DRREDDY','EICHERMOT','GAIL','GICRE','GODREJCP','GRASIM','HCLTECH','HDFCBANK','HDFCLIFE','HAVELLS','HEROMOTOCO','HINDALCO','HINDPETRO','HINDUNILVR','HINDZINC','HDFC','ITC','ICICIBANK','ICICIGI','ICICIPRULI','IBULHSGFIN','IOC','INDUSINDBK','INFY','INDIGO','JSWSTEEL','KOTAKBANK','L&TFH','LICHSGFIN','LT','LUPIN','MRF','M&M','MARICO','MARUTI','MOTHERSUMI','NHPC','NMDC','NTPC','ONGC','OIL','OFSS','PETRONET','PIDILITIND','PEL','POWERGRID','PGHH','RELIANCE','SBILIFE','SHREECEM','SRTRANSFIN','SIEMENS','SBIN','SAIL','SUNPHARMA','SUNTV','TCS','TATAMOTORS','TATASTEEL','TECHM','NIACL','TITAN','UPL','ULTRACEMCO','MCDOWELL-N','VEDL','IDEA','WIPRO','YESBANK','ZEEL');
-- (2019-01-08 no change)
-- ('ABB','ACC','ADANIPORTS','ABCAPITAL','AMBUJACEM','ASHOKLEY','ASIANPAINT','AUROPHARMA','DMART','AXISBANK','BAJAJ-AUTO','BAJFINANCE','BAJAJFINSV','BANDHANBNK','BANKBARODA','BEL','BHEL','BPCL','BHARTIARTL','INFRATEL','BIOCON','BOSCHLTD','BRITANNIA','CADILAHC','CIPLA','COALINDIA','COLPAL','CONCOR','DLF','DABUR','DRREDDY','EICHERMOT','GAIL','GICRE','GODREJCP','GRASIM','HCLTECH','HDFCBANK','HDFCLIFE','HAVELLS','HEROMOTOCO','HINDALCO','HINDPETRO','HINDUNILVR','HINDZINC','HDFC','ITC','ICICIBANK','ICICIGI','ICICIPRULI','IBULHSGFIN','IOC','INDUSINDBK','INFY','INDIGO','JSWSTEEL','KOTAKBANK','L&TFH','LICHSGFIN','LT','LUPIN','MRF','M&M','MARICO','MARUTI','MOTHERSUMI','NHPC','NMDC','NTPC','ONGC','OIL','OFSS','PETRONET','PIDILITIND','PEL','POWERGRID','PGHH','RELIANCE','SBILIFE','SHREECEM','SRTRANSFIN','SIEMENS','SBIN','SAIL','SUNPHARMA','SUNTV','TCS','TATAMOTORS','TATASTEEL','TECHM','NIACL','TITAN','UPL','ULTRACEMCO','MCDOWELL-N','VEDL','IDEA','WIPRO','YESBANK','ZEEL');
-- (2019-04-28 change: )
('ABB','ACC','ADANIPORTS','AMBUJACEM','ASHOKLEY','ASIANPAINT','AUROPHARMA','DMART','AXISBANK','BAJAJ-AUTO','BAJFINANCE','BAJAJFINSV','BAJAJHLDNG','BANDHANBNK','BANKBARODA','BHEL','BPCL','BHARTIARTL','INFRATEL','BIOCON','BOSCHLTD','BRITANNIA','CADILAHC','CIPLA','COALINDIA','COLPAL','CONCOR','DLF','DABUR','DIVISLAB','DRREDDY','EICHERMOT','GAIL','GICRE','GODREJCP','GRASIM','HCLTECH','HDFCAMC','HDFCBANK','HDFCLIFE','HAVELLS','HEROMOTOCO','HINDALCO','HINDPETRO','HINDUNILVR','HINDZINC','HDFC','ICICIBANK','ICICIGI','ICICIPRULI','ITC','IBULHSGFIN','IOC','INDUSINDBK','INFY','INDIGO','JSWSTEEL','KOTAKBANK','L&TFH','LT','LUPIN','MRF','M&M','MARICO','MARUTI','MOTHERSUMI','NHPC','NMDC','NTPC','ONGC','OFSS','PAGEIND','PETRONET','PIDILITIND','PEL','POWERGRID','PGHH','RELIANCE','SBILIFE','SHREECEM','SRTRANSFIN','SIEMENS','SBIN','SAIL','SUNPHARMA','TCS','TATAMTRDVR','TATAMOTORS','TATASTEEL','TECHM','NIACL','TITAN','UPL','ULTRACEMCO','UBL','MCDOWELL-N','VEDL','IDEA','WIPRO','YESBANK','ZEEL');

-- update NSE 200
update stock_universe a set a.is_nse200 = 0;
update stock_universe a set a.is_nse200 = 1 where ticker in
-- ('ABB','ACC','AUBANK','ADANIPORTS','ADANIPOWER','ABCAPITAL','ABFRL','AJANTPHARM','ALKEM','AMARAJABAT','AMBUJACEM','APOLLOHOSP','APOLLOTYRE','ASHOKLEY','ASIANPAINT','AUROPHARMA','AVANTIFEED','DMART','AXISBANK','BAJAJ-AUTO','BAJFINANCE','BAJAJFINSV','BALKRISIND','BANDHANBNK','BANKBARODA','BANKINDIA','BATAINDIA','BERGEPAINT','BEL','BHARATFIN','BHARATFORG','BHEL','BPCL','BHARTIARTL','INFRATEL','BIOCON','BOSCHLTD','BRITANNIA','CADILAHC','CANBK','CASTROLIND','CENTRALBK','CENTURYTEX','CHOLAFIN','CIPLA','COALINDIA','COLPAL','CONCOR','COROMANDEL','CROMPTON','CUMMINSIND','DLF','DABUR','DHFL','DBL','DISHTV','DIVISLAB','DRREDDY','EDELWEISS','EICHERMOT','ENDURANCE','ENGINERSIN','ESCORTS','EXIDEIND','FEDERALBNK','FCONSUMER','FRETAIL','GAIL','GMRINFRA','GICRE','GLENMARK','GODREJAGRO','GODREJCP','GODREJIND','GRAPHITE','GRASIM','GRUH','GSPL','HEG','HCLTECH','HDFCBANK','HDFCLIFE','HAVELLS','HEROMOTOCO','HEXAWARE','HINDALCO','HINDPETRO','HINDUNILVR','HINDZINC','HUDCO','HDFC','ITC','ICICIBANK','ICICIGI','ICICIPRULI','IDBI','IDFCBANK','IBULHSGFIN','IBVENTURES','INDIANB','INDHOTEL','IOC','IGL','INDUSINDBK','NAUKRI','INFY','INDIGO','JSWENERGY','JSWSTEEL','JINDALSTEL','JUBLFOOD','JUBILANT','KOTAKBANK','L&TFH','LICHSGFIN','LTI','LT','LUPIN','MRF','MGL','M&MFIN','M&M','MANAPPURAM','MRPL','MARICO','MARUTI','MFSL','MINDTREE','MOTHERSUMI','MPHASIS','MUTHOOTFIN','NATCOPHARM','NBCC','NHPC','NMDC','NTPC','NATIONALUM','OBEROIRLTY','ONGC','OIL','OFSS','PCJEWELLER','PIIND','PNBHOUSING','PAGEIND','PETRONET','PIDILITIND','PEL','PFC','POWERGRID','PRESTIGE','PGHH','PNB','QUESS','RBLBANK','RAJESHEXPO','RELCAPITAL','RELIANCE','RELINFRA','RPOWER','RECLTD','SBILIFE','SRF','SHREECEM','SRTRANSFIN','SIEMENS','SBIN','SAIL','STRTECH','SPARC','SUNPHARMA','SUNTV','SYNGENE','TV18BRDCST','TVSMOTOR','TATACHEM','TCS','TATAGLOBAL','TATAMOTORS','TATAPOWER','TATASTEEL','TECHM','NIACL','RAMCOCEM','TITAN','TORNTPHARM','TORNTPOWER','UPL','ULTRACEMCO','UNIONBANK','UBL','MCDOWELL-N','VGUARD','VAKRANGEE','VEDL','IDEA','VOLTAS','WIPRO','YESBANK','ZEEL');
-- 2019-01-08 new addition BBTC(Bombay Burmah), VARROC(Varroc Engineering)
-- 2019-01-08 removed BHARATFIN(Bharat Financial), CENTURYTEX(Century Textiles)
-- ('ABB','ACC','AUBANK','ADANIPORTS','ADANIPOWER','ABCAPITAL','ABFRL','AJANTPHARM','ALKEM','AMARAJABAT','AMBUJACEM','APOLLOHOSP','APOLLOTYRE','ASHOKLEY','ASIANPAINT','AUROPHARMA','AVANTIFEED','DMART','AXISBANK','BAJAJ-AUTO','BAJFINANCE','BAJAJFINSV','BALKRISIND','BANDHANBNK','BANKBARODA','BANKINDIA','BATAINDIA','BERGEPAINT','BEL','BHARATFORG','BHEL','BPCL','BHARTIARTL','INFRATEL','BIOCON','BBTC','BOSCHLTD','BRITANNIA','CADILAHC','CANBK','CASTROLIND','CENTRALBK','CHOLAFIN','CIPLA','COALINDIA','COLPAL','CONCOR','COROMANDEL','CROMPTON','CUMMINSIND','DLF','DABUR','DHFL','DBL','DISHTV','DIVISLAB','DRREDDY','EDELWEISS','EICHERMOT','ENDURANCE','ENGINERSIN','ESCORTS','EXIDEIND','FEDERALBNK','FCONSUMER','FRETAIL','GAIL','GMRINFRA','GICRE','GLENMARK','GODREJAGRO','GODREJCP','GODREJIND','GRAPHITE','GRASIM','GRUH','GSPL','HEG','HCLTECH','HDFCBANK','HDFCLIFE','HAVELLS','HEROMOTOCO','HEXAWARE','HINDALCO','HINDPETRO','HINDUNILVR','HINDZINC','HUDCO','HDFC','ITC','ICICIBANK','ICICIGI','ICICIPRULI','IDBI','IDFCBANK','IBULHSGFIN','IBVENTURES','INDIANB','INDHOTEL','IOC','IGL','INDUSINDBK','NAUKRI','INFY','INDIGO','JSWENERGY','JSWSTEEL','JINDALSTEL','JUBLFOOD','JUBILANT','KOTAKBANK','L&TFH','LICHSGFIN','LTI','LT','LUPIN','MRF','MGL','M&MFIN','M&M','MANAPPURAM','MRPL','MARICO','MARUTI','MFSL','MINDTREE','MOTHERSUMI','MPHASIS','MUTHOOTFIN','NATCOPHARM','NBCC','NHPC','NMDC','NTPC','NATIONALUM','OBEROIRLTY','ONGC','OIL','OFSS','PCJEWELLER','PIIND','PNBHOUSING','PAGEIND','PETRONET','PIDILITIND','PEL','PFC','POWERGRID','PRESTIGE','PGHH','PNB','QUESS','RBLBANK','RECLTD','RAJESHEXPO','RELCAPITAL','RELIANCE','RELINFRA','RPOWER','SBILIFE','SRF','SHREECEM','SRTRANSFIN','SIEMENS','SBIN','SAIL','STRTECH','SPARC','SUNPHARMA','SUNTV','SYNGENE','TV18BRDCST','TVSMOTOR','TATACHEM','TCS','TATAGLOBAL','TATAMOTORS','TATAPOWER','TATASTEEL','TECHM','NIACL','RAMCOCEM','TITAN','TORNTPHARM','TORNTPOWER','UPL','ULTRACEMCO','UNIONBANK','UBL','MCDOWELL-N','VGUARD','VAKRANGEE','VARROC','VEDL','IDEA','VOLTAS','WIPRO','YESBANK','ZEEL');
-- (2019-04-28 change: )
   ('ABB','ACC','AUBANK','ADANIPORTS','ADANIPOWER','ABCAPITAL','ABFRL','AJANTPHARM','ALKEM','AMARAJABAT','AMBUJACEM','APOLLOHOSP','APOLLOTYRE','ASHOKLEY','ASIANPAINT','AUROPHARMA','DMART','AXISBANK','BAJAJ-AUTO','BAJFINANCE','BAJAJFINSV','BAJAJHLDNG','BALKRISIND','BANDHANBNK','BANKBARODA','BANKINDIA','BATAINDIA','BERGEPAINT','BEL','BHARATFORG','BHEL','BPCL','BHARTIARTL','INFRATEL','BIOCON','BBTC','BOSCHLTD','BRITANNIA','CADILAHC','CANBK','CASTROLIND','CHOLAFIN','CIPLA','COALINDIA','COLPAL','CONCOR','COROMANDEL','CROMPTON','CUMMINSIND','DLF','DABUR','DHFL','DBL','DISHTV','DIVISLAB','DRREDDY','EDELWEISS','EICHERMOT','ENDURANCE','ENGINERSIN','ESCORTS','EXIDEIND','FEDERALBNK','FCONSUMER','FRETAIL','GAIL','GMRINFRA','GICRE','GSKCONS','GLENMARK','GODREJAGRO','GODREJCP','GODREJIND','GRAPHITE','GRASIM','GRUH','GSPL','HEG','HCLTECH','HDFCAMC','HDFCBANK','HDFCLIFE','HAVELLS','HEROMOTOCO','HEXAWARE','HINDALCO','HINDPETRO','HINDUNILVR','HINDZINC','HUDCO','HDFC','ICICIBANK','ICICIGI','ICICIPRULI','IDBI','IDFCFIRSTB','ITC','IBULHSGFIN','IBVENTURES','INDIANB','INDHOTEL','IOC','IGL','INDUSINDBK','NAUKRI','INFY','INDIGO','JSWENERGY','JSWSTEEL','JINDALSTEL','JUBLFOOD','JUBILANT','KOTAKBANK','L&TFH','LTTS','LICHSGFIN','LTI','LT','LUPIN','MRF','MGL','M&MFIN','M&M','MANAPPURAM','MRPL','MARICO','MARUTI','MFSL','MINDTREE','MOTHERSUMI','MPHASIS','MUTHOOTFIN','NATCOPHARM','NBCC','NHPC','NMDC','NTPC','NATIONALUM','OBEROIRLTY','ONGC','OIL','OFSS','PIIND','PNBHOUSING','PAGEIND','PETRONET','PFIZER','PIDILITIND','PEL','PFC','POWERGRID','PRESTIGE','PGHH','PNB','QUESS','RBLBANK','RECLTD','RAJESHEXPO','RELCAPITAL','RELIANCE','RELINFRA','RPOWER','SBILIFE','SRF','SHREECEM','SRTRANSFIN','SIEMENS','SBIN','SAIL','STRTECH','SPARC','SUNPHARMA','SUNTV','SYNGENE','TVSMOTOR','TATACHEM','TCS','TATAGLOBAL','TATAMTRDVR','TATAMOTORS','TATAPOWER','TATASTEEL','TECHM','NIACL','RAMCOCEM','TITAN','TORNTPHARM','TORNTPOWER','UPL','ULTRACEMCO','UNIONBANK','UBL','MCDOWELL-N','VGUARD','VARROC','VEDL','IDEA','VOLTAS','WIPRO','YESBANK','ZEEL');

-- update NSE 500
update stock_universe a set a.is_nse500 = 0;
update stock_universe a set a.is_nse500 = 1 where ticker in
-- ('3MINDIA','8KMILES','ABB','ACC','AIAENG','APLAPOLLO','AUBANK','AARTIIND','ADANIPORTS','ADANIPOWER','ADANITRANS','ABCAPITAL','ABFRL','ADVENZYMES','AEGISCHEM','AJANTPHARM','AKZOINDIA','APLLTD','ALKEM','ALBK','ALLCARGO','AMARAJABAT','AMBUJACEM','ANDHRABANK','APOLLOHOSP','APOLLOTYRE','ASHOKLEY','ASHOKA','ASIANPAINT','ASTERDM','ASTRAL','ATUL','AUROPHARMA','AVANTIFEED','DMART','AXISBANK','BASF','BEML','BSE','BAJAJ-AUTO','BAJAJCORP','BAJAJELEC','BAJFINANCE','BAJAJFINSV','BAJAJHLDNG','BALKRISIND','BALMLAWRIE','BALRAMCHIN','BANDHANBNK','BANKBARODA','BANKINDIA','BATAINDIA','BERGEPAINT','BDL','BEL','BHARATFIN','BHARATFORG','BHEL','BPCL','BHARTIARTL','INFRATEL','BIOCON','BIRLACORPN','BLISSGVS','BLUEDART','BLUESTARCO','BBTC','BOMDYEING','BOSCHLTD','BRIGADE','BRITANNIA','CARERATING','CCL','CGPOWER','CRISIL','CADILAHC','CANFINHOME','CANBK','CAPF','CAPLIPOINT','CARBORUNIV','CASTROLIND','CEATLTD','CENTRALBK','CDSL','CENTURYPLY','CENTURYTEX','CERA','CHAMBLFERT','CHENNPETRO','CHOLAFIN','CIPLA','CUB','COALINDIA','COCHINSHIP','COFFEEDAY','COLPAL','CONCOR','COROMANDEL','CROMPTON','CUMMINSIND','CYIENT','DBCORP','DCBBANK','DCMSHRIRAM','DLF','DABUR','DEEPAKFERT','DELTACORP','DEN','DENABANK','DHFL','DBL','DISHTV','DCAL','DIVISLAB','DIXON','LALPATHLAB','DRREDDY','DREDGECORP','EIDPARRY','EIHOTEL','EDELWEISS','EICHERMOT','ELGIEQUIP','EMAMILTD','ENDURANCE','ENGINERSIN','EQUITAS','ERIS','EROSMEDIA','ESCORTS','EVEREADY','EXCELCROP','EXIDEIND','FDC','FEDERALBNK','FINCABLES','FINPIPE','FSL','FCONSUMER','FLFL','FRETAIL','GAIL','GEPIL','GET&D','GHCL','GMRINFRA','GVKPIL','GALAXYSURF','GDL','GAYAPROJ','GICRE','GILLETTE','GSKCONS','GLAXO','GLENMARK','GODFRYPHLP','GODREJAGRO','GODREJCP','GODREJIND','GODREJPROP','GRANULES','GRAPHITE','GRASIM','GESHIP','GREAVESCOT','GREENPLY','GRINDWELL','GRUH','GUJALKALI','GUJFLUORO','GUJGASLTD','GMDCLTD','GNFC','GPPL','GSFC','GSPL','GULFOILLUB','HEG','HCL-INSYS','HCLTECH','HDFCBANK','HDFCLIFE','HSIL','HATHWAY','HATSUN','HAVELLS','HEIDELBERG','HERITGFOOD','HEROMOTOCO','HEXAWARE','HFCL','HSCL','HIMATSEIDE','HINDALCO','HAL','HCC','HINDCOPPER','HINDPETRO','HINDUNILVR','HINDZINC','HONAUT','HUDCO','HDFC','ITC','ICICIBANK','ICICIGI','ICICIPRULI','ISEC','IDBI','IDFCBANK','IDFC','IFBIND','IFCI','IIFL','IL&FSTRANS','IRB','ITDCEM','ITI','INDIACEM','ITDC','IBULHSGFIN','IBREALEST','IBVENTURES','INDIANB','IEX','INDHOTEL','IOC','IOB','ICIL','INDOCO','IGL','INDUSINDBK','INFIBEAM','NAUKRI','INFY','INOXLEISUR','INOXWIND','INTELLECT','INDIGO','IPCALAB','JBCHEPHARM','JKCEMENT','JKIL','JKLAKSHMI','JKTYRE','JMFINANCIL','JSWENERGY','JSWSTEEL','JAGRAN','JAICORPLTD','JISLJALEQS','JPASSOCIAT','JPPOWER','J&KBANK','JETAIRWAYS','JINDALSAW','JSLHISAR','JSL','JINDALSTEL','JCHAC','JUBLFOOD','JUBILANT','JUSTDIAL','JYOTHYLAB','KPRMILL','KIOCL','KNRCON','KRBL','KAJARIACER','KALPATPOWR','KANSAINER','KTKBANK','KARURVYSYA','KSCL','KEC','KOLTEPATIL','KOTAKBANK','L&TFH','LTTS','LICHSGFIN','LAXMIMACH','LAKSHVILAS','LTI','LT','LAURUSLABS','LEMONTREE','LINDEINDIA','LUPIN','LUXIND','MASFIN','MMTC','MOIL','MRF','MAGMA','MGL','M&MFIN','M&M','MAHINDCIE','MHRIL','MAHLOG','MANAPPURAM','MRPL','MANPASAND','MARICO','MARUTI','MFSL','MAXINDIA','MCLEODRUSS','MERCK','MINDTREE','MINDACORP','MINDAIND','MONSANTO','MOTHERSUMI','MOTILALOFS','MPHASIS','MUTHOOTFIN','NATCOPHARM','NBCC','NCC','NESCO','NHPC','NIITTECH','NLCINDIA','NMDC','NTPC','NH','NATIONALUM','NFL','NBVENTURES','NAVINFLUOR','NAVKARCORP','NETWORK18','NILKAMAL','OBEROIRLTY','ONGC','OIL','OMAXE','OFSS','ORIENTCEM','ORIENTBANK','PCJEWELLER','PIIND','PNBHOUSING','PNCINFRA','PFS','PTC','PVR','PAGEIND','PARAGMILK','PERSISTENT','PETRONET','PFIZER','PHILIPCARB','PHOENIXLTD','PIDILITIND','PEL','PFC','POWERGRID','PRAJIND','PRESTIGE','PRSMJOHNSN','PGHH','PNB','QUESS','RBLBANK','RADICO','RAIN','RAJESHEXPO','RALLIS','RKFORGE','RCF','RAYMOND','REDINGTON','RELAXO','RELCAPITAL','RCOM','RHFL','RELIANCE','RELINFRA','RNAVAL','RNAM','RPOWER','REPCOHOME','RUPA','RECLTD','SHK','SBILIFE','SJVN','SKFINDIA','SREINFRA','SRF','SADBHAV','SADBHIN','SANOFI','SCHAEFFLER','SIS','SHANKARA','SHILPAMED','SCI','SHOPERSTOP','SHREECEM','RENUKA','SHRIRAMCIT','SRTRANSFIN','SIEMENS','SPTL','SOBHA','SOLARINDS','SONATSOFTW','SOUTHBANK','STARCEMENT','SBIN','SAIL','STRTECH','STAR','SUDARSCHEM','SPARC','SUNPHARMA','SUNTV','SUNDARMFIN','SUNDRMFAST','SUNTECK','SUPREMEIND','SUVEN','SUZLON','SWANENERGY','SYMPHONY','SYNDIBANK','SYNGENE','TIFIN','TTKPRESTIG','TVTODAY','TV18BRDCST','TVSMOTOR','TVSSRICHAK','TAKE','TNPL','TATACHEM','TATACOFFEE','TCS','TATAELXSI','TATAGLOBAL','TATAINVEST','TATAMOTORS','TATAPOWER','TATASPONGE','TATASTEEL','TEAMLEASE','TECHM','TEXRAIL','NIACL','RAMCOCEM','THERMAX','THOMASCOOK','THYROCARE','TIMETECHNO','TIMKEN','TITAN','TORNTPHARM','TORNTPOWER','TRENT','TRIDENT','TIINDIA','UCOBANK','UFLEX','UPL','UJJIVAN','ULTRACEMCO','UNICHEMLAB','UNIONBANK','UBL','MCDOWELL-N','VGUARD','VMART','VIPIND','VRLLOG','WABAG','VAKRANGEE','VTL','VBL','VEDL','VENKEYS','VIJAYABANK','VINATIORGA','IDEA','VOLTAS','WABCOINDIA','WELCORP','WELSPUNIND','WHIRLPOOL','WIPRO','WOCKPHARMA','YESBANK','ZEEL','ZENSARTECH','ZYDUSWELL','ECLERX');
-- 2019-01-08 new addition ADANIGREEN(Adani Green Energy), FORTIS(Fortis), RITES(RITES), SFL(Sheela Foam), VARROC(Varroc Engineering)
-- 2019-01-08 removed BHARATFIN(Bharat Fin Incl), CAPF(Capital First), CENTURYTEX(Century Textiles), HSIL(HSIL), IIFL(IIFL Holdings)
-- ('3MINDIA','8KMILES','ABB','ACC','AIAENG','APLAPOLLO','AUBANK','AARTIIND','ADANIGREEN','ADANIPORTS','ADANIPOWER','ADANITRANS','ABCAPITAL','ABFRL','ADVENZYMES','AEGISCHEM','AJANTPHARM','AKZOINDIA','APLLTD','ALKEM','ALBK','ALLCARGO','AMARAJABAT','AMBUJACEM','ANDHRABANK','APOLLOHOSP','APOLLOTYRE','ASHOKLEY','ASHOKA','ASIANPAINT','ASTERDM','ASTRAL','ATUL','AUROPHARMA','AVANTIFEED','DMART','AXISBANK','BASF','BEML','BSE','BAJAJ-AUTO','BAJAJCORP','BAJAJELEC','BAJFINANCE','BAJAJFINSV','BAJAJHLDNG','BALKRISIND','BALMLAWRIE','BALRAMCHIN','BANDHANBNK','BANKBARODA','BANKINDIA','BATAINDIA','BERGEPAINT','BDL','BEL','BHARATFORG','BHEL','BPCL','BHARTIARTL','INFRATEL','BIOCON','BIRLACORPN','BLISSGVS','BLUEDART','BLUESTARCO','BBTC','BOMDYEING','BOSCHLTD','BRIGADE','BRITANNIA','CARERATING','CCL','CGPOWER','CRISIL','CADILAHC','CANFINHOME','CANBK','CAPLIPOINT','CARBORUNIV','CASTROLIND','CEATLTD','CENTRALBK','CDSL','CENTURYPLY','CERA','CHAMBLFERT','CHENNPETRO','CHOLAFIN','CIPLA','CUB','COALINDIA','COCHINSHIP','COFFEEDAY','COLPAL','CONCOR','COROMANDEL','CROMPTON','CUMMINSIND','CYIENT','DBCORP','DCBBANK','DCMSHRIRAM','DLF','DABUR','DEEPAKFERT','DELTACORP','DEN','DENABANK','DHFL','DBL','DISHTV','DCAL','DIVISLAB','DIXON','LALPATHLAB','DRREDDY','DREDGECORP','EIDPARRY','EIHOTEL','EDELWEISS','EICHERMOT','ELGIEQUIP','EMAMILTD','ENDURANCE','ENGINERSIN','EQUITAS','ERIS','EROSMEDIA','ESCORTS','EVEREADY','EXCELCROP','EXIDEIND','FDC','FEDERALBNK','FINCABLES','FINPIPE','FSL','FORTIS','FCONSUMER','FLFL','FRETAIL','GAIL','GEPIL','GET&D','GHCL','GMRINFRA','GVKPIL','GALAXYSURF','GDL','GAYAPROJ','GICRE','GILLETTE','GSKCONS','GLAXO','GLENMARK','GODFRYPHLP','GODREJAGRO','GODREJCP','GODREJIND','GODREJPROP','GRANULES','GRAPHITE','GRASIM','GESHIP','GREAVESCOT','GREENPLY','GRINDWELL','GRUH','GUJALKALI','GUJFLUORO','GUJGASLTD','GMDCLTD','GNFC','GPPL','GSFC','GSPL','GULFOILLUB','HEG','HCL-INSYS','HCLTECH','HDFCBANK','HDFCLIFE','HATHWAY','HATSUN','HAVELLS','HEIDELBERG','HERITGFOOD','HEROMOTOCO','HEXAWARE','HFCL','HSCL','HIMATSEIDE','HINDALCO','HAL','HCC','HINDCOPPER','HINDPETRO','HINDUNILVR','HINDZINC','HONAUT','HUDCO','HDFC','ITC','ICICIBANK','ICICIGI','ICICIPRULI','ISEC','IDBI','IDFCBANK','IDFC','IFBIND','IFCI','IL&FSTRANS','IRB','ITDCEM','ITI','INDIACEM','ITDC','IBULHSGFIN','IBREALEST','IBVENTURES','INDIANB','IEX','INDHOTEL','IOC','IOB','ICIL','INDOCO','IGL','INDUSINDBK','INFIBEAM','NAUKRI','INFY','INOXLEISUR','INOXWIND','INTELLECT','INDIGO','IPCALAB','JBCHEPHARM','JKCEMENT','JKIL','JKLAKSHMI','JKTYRE','JMFINANCIL','JSWENERGY','JSWSTEEL','JAGRAN','JAICORPLTD','JISLJALEQS','JPASSOCIAT','JPPOWER','J&KBANK','JETAIRWAYS','JINDALSAW','JSLHISAR','JSL','JINDALSTEL','JCHAC','JUBLFOOD','JUBILANT','JUSTDIAL','JYOTHYLAB','KPRMILL','KIOCL','KNRCON','KRBL','KAJARIACER','KALPATPOWR','KANSAINER','KTKBANK','KARURVYSYA','KSCL','KEC','KOLTEPATIL','KOTAKBANK','L&TFH','LTTS','LICHSGFIN','LAXMIMACH','LAKSHVILAS','LTI','LT','LAURUSLABS','LEMONTREE','LINDEINDIA','LUPIN','LUXIND','MASFIN','MMTC','MOIL','MRF','MAGMA','MGL','M&MFIN','M&M','MAHINDCIE','MHRIL','MAHLOG','MANAPPURAM','MRPL','MANPASAND','MARICO','MARUTI','MFSL','MAXINDIA','MCLEODRUSS','MERCK','MINDTREE','MINDACORP','MINDAIND','MONSANTO','MOTHERSUMI','MOTILALOFS','MPHASIS','MUTHOOTFIN','NATCOPHARM','NBCC','NCC','NESCO','NHPC','NIITTECH','NLCINDIA','NMDC','NTPC','NH','NATIONALUM','NFL','NBVENTURES','NAVINFLUOR','NAVKARCORP','NETWORK18','NILKAMAL','OBEROIRLTY','ONGC','OIL','OMAXE','OFSS','ORIENTCEM','ORIENTBANK','PCJEWELLER','PIIND','PNBHOUSING','PNCINFRA','PFS','PTC','PVR','PAGEIND','PARAGMILK','PERSISTENT','PETRONET','PFIZER','PHILIPCARB','PHOENIXLTD','PIDILITIND','PEL','PFC','POWERGRID','PRAJIND','PRESTIGE','PRSMJOHNSN','PGHH','PNB','QUESS','RBLBANK','RECLTD','RITES','RADICO','RAIN','RAJESHEXPO','RALLIS','RKFORGE','RCF','RAYMOND','REDINGTON','RELAXO','RELCAPITAL','RCOM','RHFL','RELIANCE','RELINFRA','RNAVAL','RNAM','RPOWER','REPCOHOME','RUPA','SHK','SBILIFE','SJVN','SKFINDIA','SREINFRA','SRF','SADBHAV','SADBHIN','SANOFI','SCHAEFFLER','SIS','SHANKARA','SFL','SHILPAMED','SCI','SHOPERSTOP','SHREECEM','RENUKA','SHRIRAMCIT','SRTRANSFIN','SIEMENS','SPTL','SOBHA','SOLARINDS','SONATSOFTW','SOUTHBANK','STARCEMENT','SBIN','SAIL','STRTECH','STAR','SUDARSCHEM','SPARC','SUNPHARMA','SUNTV','SUNDARMFIN','SUNDRMFAST','SUNTECK','SUPREMEIND','SUVEN','SUZLON','SWANENERGY','SYMPHONY','SYNDIBANK','SYNGENE','TIFIN','TTKPRESTIG','TVTODAY','TV18BRDCST','TVSMOTOR','TVSSRICHAK','TAKE','TNPL','TATACHEM','TATACOFFEE','TCS','TATAELXSI','TATAGLOBAL','TATAINVEST','TATAMOTORS','TATAPOWER','TATASPONGE','TATASTEEL','TEAMLEASE','TECHM','TEXRAIL','NIACL','RAMCOCEM','THERMAX','THOMASCOOK','THYROCARE','TIMETECHNO','TIMKEN','TITAN','TORNTPHARM','TORNTPOWER','TRENT','TRIDENT','TIINDIA','UCOBANK','UFLEX','UPL','UJJIVAN','ULTRACEMCO','UNICHEMLAB','UNIONBANK','UBL','MCDOWELL-N','VGUARD','VMART','VIPIND','VRLLOG','WABAG','VAKRANGEE','VTL','VARROC','VBL','VEDL','VENKEYS','VIJAYABANK','VINATIORGA','IDEA','VOLTAS','WABCOINDIA','WELCORP','WELSPUNIND','WHIRLPOOL','WIPRO','WOCKPHARMA','YESBANK','ZEEL','ZENSARTECH','ZYDUSWELL','ECLERX');
-- (2019-04-28 change: )
   ('3MINDIA','ABB','ACC','AIAENG','APLAPOLLO','AUBANK','AAVAS','ADANIGREEN','ADANIPORTS','ADANIPOWER','ADANITRANS','ABCAPITAL','ABFRL','ADVENZYMES','AEGISCHEM','AJANTPHARM','AKZOINDIA','APLLTD','ALKEM','ALBK','ALLCARGO','AMARAJABAT','AMBUJACEM','ANDHRABANK','APOLLOHOSP','APOLLOTYRE','ASHOKLEY','ASHOKA','ASIANPAINT','ASTERDM','ASTRAZEN','ASTRAL','ATUL','AUROPHARMA','AVANTIFEED','DMART','AXISBANK','BASF','BEML','BSE','BAJAJ-AUTO','BAJAJCON','BAJAJELEC','BAJFINANCE','BAJAJFINSV','BAJAJHLDNG','BALKRISIND','BALMLAWRIE','BALRAMCHIN','BANDHANBNK','BANKBARODA','BANKINDIA','MAHABANK','BATAINDIA','BERGEPAINT','BDL','BEL','BHARATFORG','BHEL','BPCL','BHARTIARTL','INFRATEL','BIOCON','BIRLACORPN','BLISSGVS','BLUEDART','BLUESTARCO','BBTC','BOMDYEING','BOSCHLTD','BRIGADE','BRITANNIA','CARERATING','CCL','CESC','CGPOWER','CRISIL','CADILAHC','CANFINHOME','CANBK','CAPLIPOINT','CARBORUNIV','CASTROLIND','CEATLTD','CENTRALBK','CDSL','CENTURYPLY','CERA','CHAMBLFERT','CHENNPETRO','CHOLAHLDNG','CHOLAFIN','CIPLA','CUB','COALINDIA','COCHINSHIP','COFFEEDAY','COLPAL','CONCOR','COROMANDEL','CORPBANK','COX&KINGS','CREDITACC','CROMPTON','CUMMINSIND','CYIENT','DBCORP','DCBBANK','DCMSHRIRAM','DLF','DABUR','DEEPAKFERT','DEEPAKNTR','DELTACORP','DHFL','DBL','DISHTV','DCAL','DIVISLAB','DIXON','LALPATHLAB','DRREDDY','EIDPARRY','EIHOTEL','EDELWEISS','EICHERMOT','ELGIEQUIP','EMAMILTD','ENDURANCE','ENGINERSIN','EQUITAS','ERIS','ESCORTS','ESSELPACK','EXIDEIND','FDC','FEDERALBNK','FINEORG','FINCABLES','FINPIPE','FSL','FORTIS','FCONSUMER','FLFL','FRETAIL','GAIL','GEPIL','GET&D','GHCL','GMRINFRA','GALAXYSURF','GDL','GAYAPROJ','GICRE','GILLETTE','GSKCONS','GLAXO','GLENMARK','GODFRYPHLP','GODREJAGRO','GODREJCP','GODREJIND','GODREJPROP','GRANULES','GRAPHITE','GRASIM','GESHIP','GREAVESCOT','GRINDWELL','GRUH','GUJALKALI','GUJFLUORO','GUJGASLTD','GMDCLTD','GNFC','GPPL','GSFC','GSPL','GULFOILLUB','HEG','HCLTECH','HDFCAMC','HDFCBANK','HDFCLIFE','HATHWAY','HATSUN','HAVELLS','HEIDELBERG','HERITGFOOD','HEROMOTOCO','HEXAWARE','HFCL','HSCL','HIMATSEIDE','HINDALCO','HAL','HINDCOPPER','HINDPETRO','HINDUNILVR','HINDZINC','HONAUT','HUDCO','HDFC','ICICIBANK','ICICIGI','ICICIPRULI','ISEC','ICRA','IDBI','IDFCFIRSTB','IDFC','IFBIND','IFCI','IRB','IRCON','ITC','ITDCEM','ITI','INDIACEM','ITDC','IBULHSGFIN','IBULISL','IBREALEST','IBVENTURES','INDIANB','IEX','INDHOTEL','IOC','IOB','INDOSTAR','INDOCO','IGL','INDUSINDBK','INFIBEAM','NAUKRI','INFY','INOXLEISUR','INOXWIND','INTELLECT','INDIGO','IPCALAB','JBCHEPHARM','JKCEMENT','JKLAKSHMI','JKPAPER','JKTYRE','JMFINANCIL','JSWENERGY','JSWSTEEL','JAGRAN','JAICORPLTD','JISLJALEQS','JPASSOCIAT','J&KBANK','JAMNAAUTO','JETAIRWAYS','JINDALSAW','JSLHISAR','JSL','JINDALSTEL','JUBLFOOD','JUBILANT','JUSTDIAL','JYOTHYLAB','KPRMILL','KEI','KIOCL','KNRCON','KRBL','KAJARIACER','KALPATPOWR','KANSAINER','KTKBANK','KARURVYSYA','KSCL','KEC','KIRLOSENG','KOLTEPATIL','KOTAKBANK','L&TFH','LTTS','LICHSGFIN','LAXMIMACH','LAKSHVILAS','LTI','LT','LAURUSLABS','LEMONTREE','LINDEINDIA','LUPIN','LUXIND','MASFIN','MMTC','MOIL','MRF','MAGMA','MGL','MAHSCOOTER','MAHSEAMLES','M&MFIN','M&M','MAHINDCIE','MHRIL','MAHLOG','MANAPPURAM','MRPL','MARICO','MARUTI','MFSL','MAXINDIA','MERCK','MINDTREE','MINDACORP','MINDAIND','MONSANTO','MOTHERSUMI','MOTILALOFS','MPHASIS','MUTHOOTFIN','NATCOPHARM','NBCC','NCC','NESCO','NHPC','NIITTECH','NLCINDIA','NMDC','NTPC','NH','NATIONALUM','NFL','NBVENTURES','NAVINFLUOR','NETWORK18','NILKAMAL','OBEROIRLTY','ONGC','OIL','OMAXE','OFSS','ORIENTCEM','ORIENTELEC','ORIENTBANK','PCJEWELLER','PIIND','PNBHOUSING','PNCINFRA','PTC','PVR','PAGEIND','PARAGMILK','PERSISTENT','PETRONET','PFIZER','PHILIPCARB','PHOENIXLTD','PIDILITIND','PEL','PFC','POWERGRID','PRAJIND','PRESTIGE','PRSMJOHNSN','PGHH','PNB','QUESS','RBLBANK','RECLTD','RITES','RADICO','RAIN','RAJESHEXPO','RALLIS','RKFORGE','RCF','RAYMOND','REDINGTON','RELAXO','RELCAPITAL','RCOM','RHFL','RELIANCE','RELINFRA','RNAM','RPOWER','REPCOHOME','RUPA','SHK','SBILIFE','SJVN','SKFINDIA','SREINFRA','SRF','SADBHAV','SANOFI','SCHAEFFLER','SIS','SHANKARA','SHARDACROP','SFL','SHILPAMED','SCI','SHOPERSTOP','SHREECEM','RENUKA','SHRIRAMCIT','SRTRANSFIN','SIEMENS','SPTL','SOBHA','SOLARINDS','SONATSOFTW','SOUTHBANK','STARCEMENT','SBIN','SAIL','STRTECH','STAR','SUDARSCHEM','SPARC','SUNPHARMA','SUNTV','SUNCLAYLTD','SUNDARMFIN','SUNDRMFAST','SUNTECK','SUPRAJIT','SUPREMEIND','SUVEN','SUZLON','SWANENERGY','SYMPHONY','SYNDIBANK','SYNGENE','TCNSBRANDS','TTKPRESTIG','TVTODAY','TV18BRDCST','TVSMOTOR','TAKE','TNPL','TATACHEM','TATACOFFEE','TCS','TATAELXSI','TATAGLOBAL','TATAINVEST','TATAMTRDVR','TATAMOTORS','TATAPOWER','TATASTEEL','TEAMLEASE','TECHM','NIACL','RAMCOCEM','THERMAX','THOMASCOOK','THYROCARE','TIMETECHNO','TIMKEN','TITAN','TORNTPHARM','TORNTPOWER','TRENT','TRIDENT','TRITURBINE','TIINDIA','UCOBANK','UFLEX','UPL','UJJIVAN','ULTRACEMCO','UNIONBANK','UBL','MCDOWELL-N','VGUARD','VMART','VIPIND','VRLLOG','VSTIND','WABAG','VAKRANGEE','VTL','VARROC','VBL','VEDL','VENKEYS','VINATIORGA','IDEA','VOLTAS','WABCOINDIA','WELCORP','WELSPUNIND','WHIRLPOOL','WIPRO','WOCKPHARMA','YESBANK','ZEEL','ZENSARTECH','ZYDUSWELL','ECLERX');

-- update BSE Sensex

update stock_universe a set a.is_sensex = 1 where bse_code in
-- ('532921','500820','532215','532977','532454','533278','500180','500182','500696','500010','532174','532187','500209','500875','500247','500510','500520','532500','532555','500312','532898','500325','500112','524715','532540','500570','570001','500470','500295','507685','532648');
-- 2019-01-08 new addition BAJFINANCE(Bajaj Finance), HCLTECH(HCL Tech)
-- 2019-01-08 removed ADANIPORTS(Adani Ports), WIPRO(Wipro)
   ('500820','532215','532977','500034','532454','533278','532281','500180','500182','500696','500010','532174','532187','500209','500875','500247','500510','500520','532500','532555','500312','532898','500325','500112','524715','532540','500570','500470','500295','532648');

-- update BSE 100
update stock_universe a set a.is_bse100 = 1 where bse_code in
-- ('500410','532921','500425','508869','500477','500820','524804','532215','532977','500034','532978','500490','532134','500049','500493','500103','500547','532454','534816','532523','500530','500825','532321','500087','533278','500830','531344','539876','500480','500096','532488','532868','500124','505200','500086','500469','532155','532296','532424','500300','517354','532281','500180','540777','500182','500440','500104','500696','500010','532174','535789','530965','532187','500209','500875','500228','500247','500510','500253','500257','532720','500520','531642','532500','517334','500290','500790','526371','532555','500312','532827','532522','500331','500302','532810','532898','532461','500325','532955','500387','511218','500550','500112','524715','500770','532540','500800','500570','570001','500400','500470','532755','500114','532343','532538','512070','500295','532822','507685','532648','505537');
-- 2019-01-08 new addition EDELWEISS(Edelweiss)
-- 2019-01-08 removed PFC(Power Finance Corp)
('500410','532921','500425','508869','500477','500820','524804','532215','532977','500034','532978','500490','532134','500049','500493','500103','500547','532454','534816','532523','500530','500825','532321','500087','533278','500830','531344','539876','500480','500096','532488','532868','500124','532922','505200','500086','500469','532155','532296','532424','500300','517354','532281','500180','540777','500182','500440','500104','500696','500010','532174','535789','530965','532187','500209','500875','500228','500247','500510','500253','500257','532720','500520','531642','532500','517334','500290','500790','526371','532555','500312','532827','532522','500331','500302','532898','532461','532955','500325','500387','511218','500550','500112','524715','500770','532540','500800','500570','500400','500470','532755','500114','532343','532538','512070','500295','532822','507685','532648','505537');

-- update BSE 200
update stock_universe a set a.is_bse200 = 1 where bse_code in
-- ('523395','500002','500410','532921','533096','539254','535755','532683','532331','539523','500008','500425','508869','500877','500101','500477','500820','540611','524804','540376','532215','532977','500034','532978','500490','502355','532134','532149','506285','509480','500049','533228','500493','500103','500547','532454','534816','532523','500530','500825','532321','532483','500870','532885','500040','500084','511243','500087','532210','533278','500830','531344','506395','500092','539876','500480','500096','533309','511072','532488','532868','500124','532922','505200','531162','540153','532178','500086','500469','540064','532155','540755','507815','500676','500660','532296','532754','532424','500164','533150','500300','511288','532702','517354','532281','500180','540777','500182','500440','500104','500696','500188','500010','532174','540716','540133','500116','539437','535789','532960','532814','500850','530965','532514','532187','532777','500209','539448','500875','532286','533148','500228','533155','530019','500165','500247','533519','540005','500510','500253','500257','532720','500520','500109','531642','532500','500271','532819','517334','532892','526299','500290','533398','524816','532234','534309','500790','533098','526371','532555','533273','500312','533106','532466','532827','534809','532522','523642','500331','500302','540173','532810','532898','500459','532461','539978','531500','500260','540065','500111','500325','500390','540767','532939','532955','540719','500387','532498','511218','500550','503806','500112','500113','524715','532733','509930','500770','500483','532540','500800','500570','570001','500400','500470','532755','540769','500114','500420','532779','532343','532538','532477','532478','512070','500295','532822','500575','500238','507685','532648','505537');
-- 2019-01-08 new addition ABBOTINDIA(Abbott), ABCAPITAL(Birla Capital), BANDHANBNK(Bandhan Bank), GRAPHITE(Graphite India), HEG(HEG), LTTS(L&T Tech Serv.)
-- 2019-01-08 removed ARVIND(Arvind), CESC(CESC), DALMIABHA(Dalmia Bharat), ENGINERSIN(Engineers India), NIACL(New India Assu), PCJEWELLER(PC Jeweller)
('523395','500002','500488','500410','532921','533096','539254','540691','535755','532683','532331','539523','500008','500425','508869','500877','500477','500820','540611','524804','540376','532215','532977','500034','532978','500490','502355','541153','532134','532149','506285','509480','500049','533228','500493','500103','500547','532454','534816','532523','500530','500825','532321','532483','500870','532885','500040','511243','500087','532210','533278','500830','531344','506395','500092','539876','500480','500096','511072','532488','532868','500124','532922','505200','531162','540153','500086','500469','540064','532155','540755','507815','500676','500660','532296','532754','532424','500164','533150','509488','500300','511288','532702','517354','532281','500180','540777','509631','500182','500440','500104','500696','500188','500010','532174','540716','540133','500116','539437','535789','532960','532814','500850','530965','532514','532187','532777','500209','539448','500875','532286','533148','500228','533155','530019','500165','500247','533519','540115','540005','500510','500253','500257','532720','500520','500109','531642','532500','500271','532819','517334','532892','526299','500290','533398','524816','532234','534309','500790','533098','526371','532555','533273','500312','533106','532466','532827','532522','523642','500331','500302','540173','532810','532898','500459','532461','539978','531500','500260','540065','532955','500111','500325','500390','540767','532939','540719','500387','532498','511218','500550','503806','500112','500113','524715','532733','509930','500770','500483','532540','500800','500570','500400','500470','532755','500114','500420','532779','532343','532538','532477','532478','512070','500295','532822','500575','500238','507685','532648','505537');

-- update BSE 500
update stock_universe a set a.is_bse500 = 0 where bse_code not in
-- ('523395','512161','524208','500002','500488','500410','532921','533096','539254','540691','535755','540025','500003','532683','532331','500710','533573','539523','532480','532749','500008','500425','532418','532259','533758','508869','500877','500101','515030','500477','533271','500820','532830','500027','540611','524804','512573','540376','532215','532977','533229','500031','500034','532978','500490','502355','523319','500038','541153','532134','532149','532525','500042','500043','506285','500048','509480','500049','533228','500493','500103','500547','532454','534816','532523','500335','506197','526612','500067','501425','500020','500530','500825','532321','511196','532483','532938','524742','513375','534804','500870','519600','500878','532885','501150','532548','500040','532443','500084','500093','500085','500110','511243','500087','532210','533278','540678','539436','500830','531344','506395','532179','533144','500092','539876','500480','532175','500096','533309','533151','532772','523367','500645','506401','532848','532121','511072','507717','540047','532839','532488','532868','500124','539524','532927','532922','505200','500125','500840','522074','531162','540153','532178','532700','539844','540596','500495','500135','531508','500086','531599','500469','500144','500940','532809','502865','500033','532843','533400','536507','540064','532155','532622','532309','522275','540755','500171','511676','507815','500676','500660','532296','532754','500163','540743','532424','500164','533150','532482','509488','500300','500620','501455','526797','506076','511288','530001','500173','539336','532181','500670','533248','500690','532702','538567','531531','517354','532281','500180','540777','509631','500292','519552','500182','532129','500183','500184','514043','500440','541154','500185','513599','500104','500696','500188','540530','532873','500010','500187','532174','540716','540133','500116','539437','532659','505726','500106','533177','530005','532189','535789','532832','532960','532814','540750','500850','530965','532388','521016','532514','532187','539807','532777','500209','532706','539083','538835','539448','524494','532947','533033','500875','509496','523610','532940','530007','506943','532644','532705','512237','500219','532532','532209','520051','532617','500378','539597','532508','532286','500380','523405','523398','533148','500228','533155','530019','535648','532926','500233','522287','500165','532652','532899','532714','517569','532942','500247','532400','532889','530813','531882','533519','540115','526947','500252','534690','540005','500510','540222','500253','523457','500257','539542','524000','539957','532720','500520','532756','533088','532313','531213','500109','539207','531642','532500','500271','539981','532865','538962','532539','532819','513377','533286','524084','517334','532892','526299','500290','534091','533398','539551','524816','532234','513023','532504','539332','508989','534309','500294','500790','532798','533098','532541','523385','513683','526371','500730','532555','533273','500312','533106','532880','532466','535754','500315','532827','539889','534809','533179','532522','500680','506590','503100','523642','500331','500302','540173','539150','532810','532898','533274','500338','500459','533344','532524','532461','532689','539978','532497','500339','531500','500355','500260','524230','520111','500330','540065','532805','530517','500111','532712','500325','500390','533107','540767','532939','535322','532955','539450','532710','500674','540719','505790','534139','540673','540425','538666','540203','530549','523598','532638','500387','532498','511218','500550','533206','500472','532784','532725','531548','532221','532218','500285','523756','503806','540575','500112','500113','532374','506655','532872','524715','532733','520056','500403','512179','532509','509930','500405','530239','532667','503310','517385','532276','539268','532890','531426','500770','532301','500483','532540','500408','500800','501301','513434','500570','570001','500400','500470','539658','532755','540595','533326','540769','500411','500413','539871','504973','532856','522113','500114','500420','532779','500251','521064','533655','517506','532515','532800','532343','509243','532505','500148','539874','532538','506690','532477','532478','512070','532953','534976','533269','502986','540180','500295','523261','532401','524200','507880','532822','500575','533023','532144','514162','500238','507685','532300','532648','505537','504067','531335');
-- new addition 18 stocks 505533(WESTLIFE DEVELOPMENT), ADANIGREEN(Adani Green Energy), ASTERDM(Aster DM Healthcare), ASTRAZEN(AstraZeneca), BDL(Bharat Dynamics), DCAL(Dishman Carbogen Amcis), GALAXYSURF(Galaxy Surfactants), HONAUT(Honeywell Automation India), IBULISL(Indiabulls Integrated Services), INDOSTAR(IndoStar Capital Finance), ISEC(ICICI Securities), KIOCL(KIOCL), LEMONTREE(Lemon Tree Hotels), MAHLOG(Mahindra Logistics), MERCK(Merck), NESCO(Nesco), STAR(Strides Pharma), TIINDIA(Tube Investments of India)
-- removed 8KMILES(8K Miles Software Services), ARVIND(Arvind), BALRAMCHIN(Balrampur Chini Mills), CAPF(Capital First), CESC(CESC), COX&KINGS(Cox & Kings), DALMIABHA(Dalmia Bharat), ENIL(Entertainment Network India), HCC(Hindustan Construction Company), HDIL(Housing Development and Infrastructure), ICIL(Indo Count Industries), IL&FSTRANS(IL&FS Transportation Networks), JKIL(J.Kumar Infraprojects), KWALITY(kwality), PFS(PTC India Financial Services), RNAVAL(Reliance Naval and Engineering), TEXRAIL(Texmaco Rail & Engineering), UNICHEMLAB(Unichem Laboratories)
('523395','524208','500002','500488','500410','541450','532921','533096','539254','540691','535755','540025','500003','532683','532331','500710','533573','539523','532480','532749','500008','500425','532418','532259','533758','508869','500877','515030','500477','533271','500820','540975','532830','506820','500027','540611','524804','512573','540376','532215','532977','533229','500031','500034','532978','500490','502355','523319','541153','532134','532149','532525','500042','500043','506285','500048','509480','541143','500049','533228','500493','500103','500547','532454','534816','532523','500335','506197','526612','500067','501425','500020','500530','500825','532321','511196','532483','524742','513375','534804','500870','519600','500878','532885','501150','532548','500040','532443','500093','500085','500110','511243','500087','532210','533278','540678','539436','500830','531344','506395','532179','500092','539876','500480','532175','500096','533151','532772','523367','500645','506401','532848','532121','511072','507717','540047','532839','540701','532488','532868','500124','539524','532927','532922','505200','500125','500840','522074','531162','540153','532178','539844','540596','500495','500135','531508','500086','531599','500469','500144','500940','532809','502865','500033','532843','533400','536507','540064','532155','540935','532622','532309','522275','540755','500171','511676','507815','500676','500660','532296','532754','500163','540743','532424','500164','533150','532482','509488','500300','500620','501455','526797','506076','511288','530001','500173','539336','532181','500670','533248','500690','532702','538567','531531','517354','532281','500180','540777','509631','500292','519552','500182','532129','500183','500184','514043','500440','541154','513599','500104','500696','500188','517174','540530','500010','500187','532174','540716','540133','541179','500116','539437','532659','505726','500106','530005','532189','535789','533520','532832','532960','532814','540750','500850','530965','532388','541336','532514','532187','539807','532777','500209','532706','539083','538835','539448','524494','532947','533033','500875','509496','523610','530007','506943','532644','532705','512237','500219','532532','532209','520051','532617','500378','539597','532508','532286','500380','523405','523398','533148','500228','533155','530019','535648','532926','500233','522287','500165','532652','532899','532714','517569','540680','532942','500247','532400','532889','530813','533519','540115','526947','500252','534690','540005','500510','540222','541233','500253','523457','500257','539542','524000','539957','532720','500520','532756','533088','532313','540768','531213','500109','539207','531642','532500','500271','539981','532865','500126','538962','532539','532819','513377','533286','524084','517334','532892','526299','500290','534091','533398','539551','524816','532234','513023','532504','539332','508989','534309','500294','505355','500790','532798','533098','532541','523385','513683','526371','500730','532555','533273','500312','533106','532880','532466','535754','500315','532827','539889','534809','533179','532522','500680','506590','503100','523642','500331','500302','540173','539150','532810','532898','533274','500338','500459','532524','532461','532689','539978','532497','500339','531500','500355','500260','524230','520111','500330','540065','532955','532805','530517','500111','532712','500325','500390','540767','532939','535322','539450','532710','500674','540719','505790','534139','540673','540425','538666','540203','530549','523598','532638','500387','532498','511218','500550','533206','500472','532784','532725','531548','532221','532218','500285','523756','503806','540575','500112','500113','532374','532531','506655','532872','524715','532733','520056','500403','512179','532509','509930','500405','530239','532667','503310','517385','532276','539268','532890','531426','500770','532301','500483','532540','500408','500800','501301','513434','500570','500400','500470','539658','532755','540595','540769','500411','500413','539871','504973','532856','522113','500114','500420','532779','500251','521064','533655','517506','540762','532515','532800','532343','509243','532505','500148','539874','532538','532477','532478','512070','532953','534976','533269','502986','540180','500295','523261','532401','524200','507880','532822','500575','533023','532144','514162','505533','500238','507685','532300','532648','505537','504067','531335');

commit;

-- drop table stock_universe_screener;
CREATE TABLE stock_universe_screener (
  ticker varchar(30) COLLATE utf8_unicode_ci NOT NULL COMMENT 'PK Usually NSE Code, BSE Code in case there is ''&'' in NSE Code or stock is only listed on BSE',
  name varchar(100) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Full Name on as of NSE or BSE',
  marketcap decimal(20,0) DEFAULT 0 COMMENT 'Market Cap in Rs',
  marketcap_rank int(5) DEFAULT 0 COMMENT 'Market Cap Rank',
  PRIMARY KEY (ticker)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Screener Data ';
select * from stock_universe_screener;

-- update stock_universe a set a.marketcap = 0 , a.marketcap_rank = 0;
-- update stock_universe a, stock_universe_screener b set a.ticker5 = b.ticker, a.marketcap = b.marketcap, a.marketcap_rank = b.marketcap_rank where a.ticker = b.ticker;
commit;

select b.sector_name_display, b.industry_name_display, b.sub_industry_name_display, a.ticker, a.nse_code, a.bse_code, a.short_name, a.is_sensex, a.is_nifty50, a.is_niftyjr, a.is_bse100, a.is_nse100, a.is_bse200, a.is_nse200, a.is_bse200, a.is_nse500 from stock_universe a, subindustry b where a.subindustryid = b.subindustryid and (a.is_nse500 = 1 or a.is_bse500 = 1) order by a.marketcap desc, isin_code;

-- drop table stock_universe_moneycontrol;
create table stock_universe_moneycontrol (
ISIN_Code varchar(30) COLLATE utf8_unicode_ci NOT NULL COMMENT 'PK ISIN Code',
link1 varchar(150) COLLATE utf8_unicode_ci DEFAULT '' COMMENT 'URL part',
link2 varchar(30) COLLATE utf8_unicode_ci DEFAULT '' COMMENT 'URL code',
company_name varchar(150) COLLATE utf8_unicode_ci DEFAULT '' COMMENT 'Company Name',
ISIN_Code2 varchar(30) COLLATE utf8_unicode_ci DEFAULT '' COMMENT 'Original ISIN Code for DVR',
nse_code varchar(30) COLLATE utf8_unicode_ci DEFAULT '' COMMENT 'NSE code',
bse_code  int(10) DEFAULT 0 COMMENT 'URL code',
link3 varchar(30) COLLATE utf8_unicode_ci DEFAULT '' COMMENT 'Alternate URL code',
sector_code	varchar(30) COLLATE utf8_unicode_ci DEFAULT '' COMMENT 'Sector code',
sector_name varchar(150) COLLATE utf8_unicode_ci DEFAULT '' COMMENT 'Sector Name',
primary key (ISIN_code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Moneycontrol Data ';

select * from stock_universe_moneycontrol;

-- update stock_universe a, stock_universe_moneycontrol b set a.ticker1 = b.link2 where a.isin_code = b.ISIN_Code;


-- drop table stock_universe_shortname;
create table stock_universe_shortname (
  ticker varchar(30) COLLATE utf8_unicode_ci NOT NULL COMMENT 'PK Usually NSE Code, BSE Code in case there is ''&'' in NSE Code or stock is only listed on BSE',
  nse_code varchar(30) COLLATE utf8_unicode_ci DEFAULT '' COMMENT 'NSE Code',
  bse_code varchar(30) COLLATE utf8_unicode_ci DEFAULT '' COMMENT 'BSE Code',
  isin_code varchar(20) COLLATE utf8_unicode_ci DEFAULT '' COMMENT 'ISIN Code ',
  edited_short_name varchar(100) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Short Name for Display Purpose',
  edited_name varchar(100) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Full Name on as of NSE or BSE',
  original_name varchar(100) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Full Name on as of NSE or BSE',
  PRIMARY KEY (ticker),
  UNIQUE KEY (isin_code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Edited Short Names of Stock Universe';

-- insert into stock_universe_shortname (select ticker, nse_code, bse_code, isin_code, short_name, name, name from stock_universe);

select * from stock_universe_shortname a where ticker in (select ticker from stock_universe where is_nse500 = 1);
select * from stock_universe_shortname a where a.edited_name <> original_name;
select * from stock_universe_shortname a;
update stock_universe a, stock_universe_shortname b  set a.name = b.edited_name, a.short_name = b.edited_short_name where a.ticker = b.ticker;
SELECT * from stock_universe a order by a.marketcap desc, isin_code;

create table stock_universe_subindustry (
  ticker varchar(30) COLLATE utf8_unicode_ci NOT NULL COMMENT 'PK Usually NSE Code, BSE Code in case there is ''&'' in NSE Code or stock is only listed on BSE',
  nse_code varchar(30) COLLATE utf8_unicode_ci DEFAULT '' COMMENT 'NSE Code',
  bse_code varchar(30) COLLATE utf8_unicode_ci DEFAULT '' COMMENT 'BSE Code',
  isin_code varchar(20) COLLATE utf8_unicode_ci DEFAULT '' COMMENT 'ISIN Code ',
  subindustryid int(6) default 0 COMMENT 'Sub Industry Id',
  PRIMARY KEY (ticker),
  UNIQUE KEY (isin_code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Sub Industries of Stock Universe from twealthbook db';

select * from stock_universe_subindustry;
/*
insert into stock_universe_subindustry
select a.company_ticker, a.company_nse_code, a.company_bse_code, a.company_isin_code,  b.sub_industry_id from company_universe a, sub_industry b where a.company_sub_industry_name_display = b.sub_industry_name_display;
*/

update stock_universe a, stock_universe_subindustry b set a.subindustryid = b.subindustryid where a.ticker = b.ticker;

COMMIT;

update stock_universe a set asset_classid = 406010 where a.is_bse100 = 1 or a.is_nse100 = 1;
update stock_universe a set asset_classid = 406020 where (a.is_bse200 = 1 and a.is_bse100 = 0) or (a.is_nse200 = 1 and a.is_nse100 = 0);
update stock_universe a set asset_classid = 406030 where (a.is_bse500 = 1 and a.is_bse200 = 0) or (a.is_nse500 = 1 and a.is_nse200 = 0);
update stock_universe a set asset_classid = 406040 where asset_classid = 0;

select * from stock_universe order by asset_classid, marketcap desc, ticker;

create table stock_universe_bloomberg (
  ticker varchar(30) COLLATE utf8_unicode_ci NOT NULL COMMENT 'PK Usually NSE Code, BSE Code in case there is ''&'' in NSE Code or stock is only listed on BSE',
  ticker_b varchar(30) COLLATE utf8_unicode_ci DEFAULT '' COMMENT 'Bloomberg code for the stock',
  PRIMARY KEY (ticker)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='To update Stock Universe with bloomberg tickers';

select * from stock_universe_bloomberg;
update stock_universe a, stock_universe_bloomberg b set a.ticker2 = b.ticker_b where a.ticker = b.ticker;

select * from stock_universe a where (a.is_nse500 = 1 or a.is_bse500 = 1) and ticker2 ='' order by asset_classid, marketcap desc, ticker;

select * from stock_universe a WHERE a.ticker like 'BAJ%';
